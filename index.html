<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.0" />






<meta name="description" content="Google Fans、Android Follower">
<meta property="og:type" content="website">
<meta property="og:title" content="Archmage's Temple">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Archmage's Temple">
<meta property="og:description" content="Google Fans、Android Follower">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Archmage's Temple">
<meta name="twitter:description" content="Google Fans、Android Follower">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: '[object Object]',
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Archmage's Temple </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?da710790a496bc89a396c9df47db0d72";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Archmage's Temple</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">追求卓越</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/16/OSX-JDK一键切换的方法/" itemprop="url">
                  OSX(ZSH) 一键切换JDK版本的方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-16T16:43:04+08:00" content="2016-03-16">
              2016-03-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/16/OSX-JDK一键切换的方法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/16/OSX-JDK一键切换的方法/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="u80CC_u666F_28Why_29"><a href="#u80CC_u666F_28Why_29" class="headerlink" title="背景(Why)"></a>背景(Why)</h1><p>现在经常遇到一些事情需要不同的 JDK 环境. 比如编译 android4.4源码要 JDK6 ,编译 play framework(1.2.7) 需要JDK7(JDK8会报错)，这个时候要是能一键切换就能方便很多。下面我就向大家介绍一下OSX下zsh terminal一键切换JDK版本的方法。</p>
<h1 id="u5982_u4F55_u5207_u6362_28How_29"><a href="#u5982_u4F55_u5207_u6362_28How_29" class="headerlink" title="如何切换(How)"></a>如何切换(How)</h1><p><code>vi ~/.zshrc</code></p>
<p>在配置文件底部添加如下配置：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#JDK <span class="keyword">Switch</span></span><br><span class="line">export JAVA_6_HOME=<span class="regexp">/Library/</span>Java<span class="regexp">/JavaVirtualMachines/</span><span class="number">1.6</span>.<span class="number">0</span>.jdk<span class="regexp">/Contents/</span>Home</span><br><span class="line">export JAVA_7_HOME=<span class="regexp">/Library/</span>Java<span class="regexp">/JavaVirtualMachines/</span>jdk1.<span class="number">7.0</span>_67.jdk<span class="regexp">/Contents/</span>Home</span><br><span class="line">export JAVA_8_HOME=<span class="regexp">/Library/</span>Java<span class="regexp">/JavaVirtualMachines/</span>jdk1.<span class="number">8.0</span>_73.jdk<span class="regexp">/Contents/</span>Home</span><br><span class="line"></span><br><span class="line">export JAVA_HOME=$JAVA_8_HOME</span><br><span class="line"></span><br><span class="line">alias jdk8=<span class="string">'export JAVA_HOME=$JAVA_8_HOME'</span></span><br><span class="line">alias jdk7=<span class="string">'export JAVA_HOME=$JAVA_7_HOME'</span></span><br><span class="line">alias jdk6=<span class="string">'export JAVA_HOME=$JAVA_6_HOME'</span></span><br></pre></td></tr></table></figure>
<p>然后命令行输入<code>jdk6/jdk7/jdk8</code> 就可以得到相应的版本</p>
<h1 id="u8FD0_u884C_u6548_u679C"><a href="#u8FD0_u884C_u6548_u679C" class="headerlink" title="运行效果"></a>运行效果</h1><h2 id="Switch_JDK6"><a href="#Switch_JDK6" class="headerlink" title="Switch JDK6"></a>Switch JDK6</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ jdk6</span><br><span class="line">$ java -version</span><br><span class="line">java version <span class="string">"1.6.0_65"</span></span><br><span class="line"><span class="function"><span class="title">Java</span><span class="params">(TM)</span></span> SE Runtime Environment (build <span class="number">1.6</span>.<span class="number">0</span>_65-b14-<span class="number">468</span>-<span class="number">11</span>M4833)</span><br><span class="line">Java <span class="function"><span class="title">HotSpot</span><span class="params">(TM)</span></span> <span class="number">64</span>-Bit Server VM (build <span class="number">20.65</span>-b04-<span class="number">468</span>, mixed mode)</span><br></pre></td></tr></table></figure>
<h2 id="Switch_JDK7"><a href="#Switch_JDK7" class="headerlink" title="Switch JDK7"></a>Switch JDK7</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ jdk7</span><br><span class="line">$ java -version</span><br><span class="line">java version <span class="string">"1.7.0_67"</span></span><br><span class="line"><span class="function"><span class="title">Java</span><span class="params">(TM)</span></span> SE Runtime Environment (build <span class="number">1.7</span>.<span class="number">0</span>_67-b01)</span><br><span class="line">Java <span class="function"><span class="title">HotSpot</span><span class="params">(TM)</span></span> <span class="number">64</span>-Bit Server VM (build <span class="number">24.65</span>-b04, mixed mode)</span><br></pre></td></tr></table></figure>
<h2 id="Switch_JDK8"><a href="#Switch_JDK8" class="headerlink" title="Switch JDK8"></a>Switch JDK8</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ jdk8</span><br><span class="line">$ java -version</span><br><span class="line">java version <span class="string">"1.8.0_73"</span></span><br><span class="line"><span class="function"><span class="title">Java</span><span class="params">(TM)</span></span> SE Runtime Environment (build <span class="number">1.8</span>.<span class="number">0</span>_73-b02)</span><br><span class="line">Java <span class="function"><span class="title">HotSpot</span><span class="params">(TM)</span></span> <span class="number">64</span>-Bit Server VM (build <span class="number">25.73</span>-b02, mixed mode)</span><br></pre></td></tr></table></figure>
<p>切换起来so easy啊, 一颗赛艇😄</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/15/as-tips/" itemprop="url">
                  Android Studio Tips（OSX）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-15T13:28:35+08:00" content="2016-02-15">
              2016-02-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/15/as-tips/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/15/as-tips/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Android_Studio_Tips_uFF08OSX_uFF09"><a href="#Android_Studio_Tips_uFF08OSX_uFF09" class="headerlink" title="Android Studio Tips（OSX）"></a>Android Studio Tips（OSX）</h1><p>使用Android Studio开发已经一年多了，这是Google力推的Android开发工具（而且官方已经放弃Eclipse ADT更新了）。</p>
<p>自从开发Android从eclipse迁移到Android Studio后，为了提高自己的开发效率，奉着“键盘可以替代鼠标”的理念，先是去网上搜罗各种快捷键， 接着又搜罗各种插件来提升开发效率。</p>
<p>其实关于插件和快捷键以及AS的使用技巧，网上有各种详细的教程。这里告诉大家<strong>不用都记住</strong>，因为常用的就那么几个，下面我就把我自己经常用的，好用的快捷键以及插件分享给大家。<br>【备注】由于我开发使用的是mac电脑，下面的快捷键都是osx下面的，windows小伙伴忽略</p>
<h2 id="u5FEB_u6377_u952E"><a href="#u5FEB_u6377_u952E" class="headerlink" title="快捷键"></a>快捷键</h2><p>展开部分代码块：<code>cmd + &quot;+&quot;</code><br>展开全部代码块：<code>cmd + shift + &quot;+&quot;</code></p>
<p>折叠部分代码块：<code>cmd + &quot;-&quot;</code><br>折叠全部代码块：<code>cmd + shift + &quot;-&quot;</code>    </p>
<p>提取方法：<code>cmd + option + M</code><br>跳转到指定行数： <code>cmd + L</code><br>指定行数代码添加try catch/if/while等： <code>cmd + option + T</code>      </p>
<p>复写父类方法： <code>ctrl + O</code><br>实现接口方法： <code>ctrl + I</code>      </p>
<p>调用生成器（getter setter/toString/equals等）: <code>cmd + N</code><br>查找被使用的地方： <code>option + F7</code><br>格式化代码： <code>cmd + option + L</code><br>全局搜索： <code>double shift(快速按两下shift键)</code>      </p>
<p>打开一个类： <code>cmd + O</code><br>打开一个文件： <code>cmd + shift + O</code>      </p>
<p>最近打开的文件： <code>cmd + E</code><br>最近编辑的文件：<code>cmd + shift + E</code>      </p>
<p>跳转到类、变量、方法声明的地方： <code>cmd + B</code><br>跳转到父类：<code>cmd + U</code><br>重命名变量名或者方法名： <code>shift + F6</code>    </p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/02/15/as-tips/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/15/android最佳实践/" itemprop="url">
                  Android开发中的“要”与“不要”
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-15T13:12:30+08:00" content="2016-02-15">
              2016-02-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/15/android最佳实践/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/15/android最佳实践/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Android_u5F00_u53D1_u4E2D_u7684_u201C_u8981_u201D_u4E0E_u201C_u4E0D_u8981_u201D"><a href="#Android_u5F00_u53D1_u4E2D_u7684_u201C_u8981_u201D_u4E0E_u201C_u4E0D_u8981_u201D" class="headerlink" title="Android开发中的“要”与“不要”"></a>Android开发中的“要”与“不要”</h1><p>我们在开发Android应用的过程中，不能只满足于实现功能，应该遵循一些准则，使得我们的代码优雅并且便于维护和扩展，我们应该做到如下几“要”和几“不要”  </p>
<h2 id="u8981"><a href="#u8981" class="headerlink" title="要"></a>要</h2><ul>
<li><a href="#build-system">使用Gradle以及Gradle推荐的工程结构</a></li>
<li><a href="#gradle-config">把密码以及敏感信息放在gradle.properties中</a></li>
<li><a href="#light-library">受限于<em>65k method limit</em>，尽量使用轻量的库</a></li>
<li><a href="#json解析">使用第三方库解析JSON数据</a></li>
<li><a href="#layout-styles">使用styles来避免layout xml中重复的属性</a></li>
<li><a href="#genymotion">使用Genymotion模拟器（此模拟器真的很快）</a></li>
<li><a href="#proguard">必须使用Proguard混淆代码</a></li>
</ul>
<h2 id="u4E0D_u8981"><a href="#u4E0D_u8981" class="headerlink" title="不要"></a>不要</h2><ul>
<li><a href="#httpclient">不要自己写Http Client, 使用Volley或者OkHttp库</a></li>
<li><a href="#split-style">不要把一个styles.xml写得很大，尽量拆分</a></li>
<li><a href="#colors">colors.xml不要写得复杂，只定义一个调色板就ok</a></li>
<li><a href="#dimens">dimens.xml也不要写得复杂，只定义通用的尺寸</a></li>
<li><a href="#view-hierarchy">不要把View的层级写得很深</a>  </li>
</ul>
<p><h3 id="build-system">项目结构</h3><br>Google推荐使用Gradle &amp; Android Studio开发Android项目，新的工程结构是这个样子的:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">new-structure</span><br><span class="line">├─ library-foobar</span><br><span class="line">├─ app</span><br><span class="line">│  ├─ libs</span><br><span class="line">│  ├─ src</span><br><span class="line">│  │  ├─ androidTest</span><br><span class="line">│  │  │  └─ java</span><br><span class="line">│  │  │     └─ com/futurice/project</span><br><span class="line">│  │  └─ main</span><br><span class="line">│  │     ├─ java</span><br><span class="line">│  │     │  └─ com/futurice/project</span><br><span class="line">│  │     ├─ res</span><br><span class="line">│  │     └─ AndroidManifest.xml</span><br><span class="line">│  ├─ build.gradle</span><br><span class="line">│  └─ proguard-rules.pro</span><br><span class="line">├─ build.gradle</span><br><span class="line">└─ settings.gradle</span><br></pre></td></tr></table></figure>
<p><h3 id="gradle-config">Gradle配置</h3><br>在我们app的builde.gradle文件中，我们需要针对release build定义<code>signingConfigs</code> , 也许我们会这么写：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">signingConfigs &#123;</span><br><span class="line">    release &#123;</span><br><span class="line">        storeFile file(<span class="string">"myapp.keystore"</span>)</span><br><span class="line">        storePassword <span class="string">"password123"</span></span><br><span class="line">        keyAlias <span class="string">"thekey"</span></span><br><span class="line">        keyPassword <span class="string">"password789"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种写法我们是不推荐的，因为密码是敏感信息，我们应该将其放置<code>gradle.properties</code>中，应该这样：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">KEYSTORE_PASSWORD=password123</span><br><span class="line">KEY_PASSWORD=password789</span><br></pre></td></tr></table></figure>
<p>然后我们的build.gradle文件应该这样写：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">signingConfigs &#123;</span><br><span class="line">    release &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            storeFile file(<span class="string">"myapp.keystore"</span>)</span><br><span class="line">            storePassword KEYSTORE_PASSWORD</span><br><span class="line">            keyAlias <span class="string">"thekey"</span></span><br><span class="line">            keyPassword KEY_PASSWORD</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> InvalidUserDataException(<span class="string">"You should define KEYSTORE_PASSWORD and KEY_PASSWORD in gradle.properties."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/02/15/android最佳实践/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/29/Nuwa-HotFix/" itemprop="url">
                  基于Nuwa实现Android自动化HotFix
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-29T17:35:55+08:00" content="2015-12-29">
              2015-12-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/29/Nuwa-HotFix/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/29/Nuwa-HotFix/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="What_u2013_u4EC0_u4E48_u662FHotFix"><a href="#What_u2013_u4EC0_u4E48_u662FHotFix" class="headerlink" title="What–什么是HotFix"></a>What–什么是HotFix</h1><p>HotFix是针对某一个具体的系统漏洞或安全问题而发布的专门解决该漏洞或安全问题的小程序，通常称为修补程序</p>
<h1 id="Why_u2013_u4E3A_u4EC0_u4E48_u6211_u4EEC_u8981_u7528HotFix"><a href="#Why_u2013_u4E3A_u4EC0_u4E48_u6211_u4EEC_u8981_u7528HotFix" class="headerlink" title="Why–为什么我们要用HotFix"></a>Why–为什么我们要用HotFix</h1><p>试想这样一个场景：当Android发布App之后，如果突然发现了一个严重bug，而这个bug需要进行紧急修复</p>
<p>这时候我们通常的处理流程是：解决bug、重新打包App、测试、向各个应用市场和渠道换包、提示用户升级、用户下载、覆盖安装。有时候仅仅是为了修改了一行代码，也要付出巨大的成本进行换包和重新发布。用户体验来很是糟糕</p>
<p><code>Question: 有没有办法不重新发布App，不需要用户重新下载覆盖安装，就可以完成Bug的修复？</code></p>
<p>答案是Yes，HotFix就是做这个事情的。Android HotFix原理介绍可以参照这里：<a href="http://zhuanlan.zhihu.com/magilu/20308548">HotFix</a>  </p>
<p>Nuwa(<a href="https://github.com/jasonross/Nuwa">女娲</a>)是一个自动化的工具，基于上述原理将骤自动化了，下面我就介绍一下如何使用<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/12/29/Nuwa-HotFix/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/23/Travis-CI-Integration/" itemprop="url">
                  基于Travis CI搭建Android持续集成以及自动打包发布流程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-23T16:36:39+08:00" content="2015-12-23">
              2015-12-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/23/Travis-CI-Integration/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/23/Travis-CI-Integration/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="u524D_u8A00"><a href="#u524D_u8A00" class="headerlink" title="前言"></a>前言</h2><p>最近项目进度比较轻松，闲来自己研究一些感兴趣的技术，恰好这两天研究了一下Travic CI, 用于Android持续集成以及自动打包，话不多说，下面大家就跟我一起踏入Travis CI的奇妙旅行</p>
<h2 id="u80CC_u666F"><a href="#u80CC_u666F" class="headerlink" title="背景"></a>背景</h2><p>我们在开发Android项目的时候，大致的流程是这样：<br><img src="http://ww3.sinaimg.cn/large/53488390gw1ez9ot3wk0gj20n9035jrl.jpg" alt="image"></p>
<p> <code>Question:这些步骤能否简化，能否自动化？</code><br>懒是码农的美德，作为资深码农应该善于用工具提高自己的工作效率，能自动化的要自动化。那么今天要讲的Travis CI就能简化我们的工作，上述流程如果使用Travis CI那么工作流程是这样的：<br><img src="http://ww2.sinaimg.cn/large/53488390gw1ez9oxznunij20dn02nmx7.jpg" alt="image"><br>Tag提交后，Travis CI会自动编译代码，生成apk文件，并发到Github和相应地其他渠道（fir.im, 蒲公英等），分发完成后，会邮件通知参与测试的人员。如此一来，作为码农，只要安心Coding和打Tag就好了，轻松愉快啊😄,下面我们就来着重介绍Travis  </p>
<h2 id="u4EC0_u4E48_u662FTravis_CI"><a href="#u4EC0_u4E48_u662FTravis_CI" class="headerlink" title="什么是Travis CI"></a>什么是<a href="https://github.com/integrations/travis-ci">Travis CI</a></h2><p>简单来说它是用来做持续集成的工具，可以为你自动构建、测试、打包等等，极大的简化了工作流程。它对Github的支持特别好，链接到你在Github上的项目以后，每当你把测试通过后的代码提交到master去，它会pull你的代码并按照你的要求构建执行  </p>
<h2 id="u5982_u4F55_u5B89_u88C5Travis_CI"><a href="#u5982_u4F55_u5B89_u88C5Travis_CI" class="headerlink" title="如何安装Travis CI"></a>如何安装Travis CI</h2><p>首先需要安装Ruby, 你可以通过运行<code>ruby -v</code> 检查系统是否安装Ruby:    </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ruby -v</span><br><span class="line">ruby <span class="number">2.0</span><span class="number">.0</span>p645 (<span class="number">2015</span>-<span class="number">04</span>-<span class="number">13</span> revision <span class="number">50299</span>) [universal.x86_64-darwin15]</span><br></pre></td></tr></table></figure>
<p>然后运行：  </p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gem install travis -<span class="keyword">v</span> <span class="number">1.8</span>.<span class="number">0</span> --<span class="keyword">no</span>-rdoc --<span class="keyword">no</span>-<span class="keyword">ri</span></span><br></pre></td></tr></table></figure>
<p>安装完毕后，检验一下：  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ travis version</span><br><span class="line"><span class="number">1.8</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/12/23/Travis-CI-Integration/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/19/android-data-binding/" itemprop="url">
                  Android Data Binding(More Xml, Less Java)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-19T17:51:10+08:00" content="2015-12-19">
              2015-12-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/19/android-data-binding/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/19/android-data-binding/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="u80CC_u666F"><a href="#u80CC_u666F" class="headerlink" title="背景"></a>背景</h1><p>Google在2015年的I/O大会上发布了三个重要的支持库：    </p>
<ul>
<li>Material Design支持库：Android Support Design  </li>
<li>百分比布局支持库：Percent support lib  </li>
<li><font color=#FF69B4><strong>数据绑定支持库：Data Binding Library</strong></font>

</li>
</ul>
<h1 id="Data_Binding_u6709_u4EC0_u4E48_u4F5C_u7528"><a href="#Data_Binding_u6709_u4EC0_u4E48_u4F5C_u7528" class="headerlink" title="Data Binding有什么作用"></a>Data Binding有什么作用</h1><ul>
<li>是官方支持的<a href="https://www.objc.io/issues/13-architecture/mvvm/">MVVM</a>模式框架</li>
<li><p>可以直接在静态布局XML中绑定数据，无需再findViewById,然后再手动设置数据  </p>
<p><code>Question:是不是RoboGuice、AndroidAnotations...这样的依赖注入框架会慢慢淡出市场</code></p>
</li>
<li>可以提高解析XML的速度</li>
<li>UI与功能解耦</li>
</ul>
<h1 id="Data_Binding_u7684_u9700_u6C42_u4E0E_u652F_u6301"><a href="#Data_Binding_u7684_u9700_u6C42_u4E0E_u652F_u6301" class="headerlink" title="Data Binding的需求与支持"></a>Data Binding的需求与支持</h1><h2 id="u9700_u6C42"><a href="#u9700_u6C42" class="headerlink" title="需求"></a>需求</h2><ul>
<li>Android Studio 1.3.0-beta1 或更高版本</li>
<li>Gradle plugin 1.3.0以上</li>
</ul>
<h2 id="u652F_u6301"><a href="#u652F_u6301" class="headerlink" title="支持"></a>支持</h2><ul>
<li>Android 2.1(API level 7+)以上</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/12/19/android-data-binding/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/19/multi-packages/" itemprop="url">
                  Android自动化之多渠道打包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-19T17:41:17+08:00" content="2015-12-19">
              2015-12-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/19/multi-packages/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/19/multi-packages/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="u6982_u8FF0"><a href="#u6982_u8FF0" class="headerlink" title="概述"></a>概述</h2><p>每当发新版本的时候，Android客户端会分发到各大市场，比如：豌豆荚，91，小米等。为了统计这些市场的效果（活跃度，下载量等），需要有一种方法唯一标识它们。<br>每次发版本，产品部都会提供一个渠道列表，Android开发者会根据这些渠道相应地生成渠道包，随着渠道越来越多，客户端如果都是机械手动去打的话，会累死，程序猿都是聪明而懒惰的，客户端打渠道包的方法一直在演进和提高。<br>从美团技术博客上有一篇介绍自动打包的博文，结合我自己的项目，我就对META-INF自动化打包作一下描述。<br>我们首先需要用工具（IDE、maven、ant等等）打一个签名包，这个包作为母包，用来打各个渠道包用。这个包我们用解压缩工具打开，发现根目录会有一个META-INF目录，如下图所示<br><img src="http://ww2.sinaimg.cn/large/53488390gw1ez53xnbnjoj207g06a3yw.jpg" alt="image"><br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/12/19/multi-packages/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/19/tools-namespace/" itemprop="url">
                  Android静态布局中tools命名空间的作用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-19T17:27:35+08:00" content="2015-12-19">
              2015-12-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/19/tools-namespace/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/19/tools-namespace/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>If you have ever entered some testing text in a TextView to see how it looks in the previewer, then this is for you.</p>
<p>For any attribute in the xml that has the pattern ‘android:something=”value”‘, you can add a new attribute named <code>tools:something=”value”</code> and it will be picked up by the previewer but ignored in your app. Then you can leave default values that makes sense to visualize the layout without impacting the final build.</p>
<p>Two things that you should check using the tools namespace:</p>
<p>1) Text that will be set at runtime (so that you don’t try to visualize an empty layout)</p>
<p>2) Stuff that is dynamically changed later (e.g. visibility)</p>
<p>To configure the tools namespace, put this in the root tag of your layout (under the android xmlns):</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">xmlns:</span>tools=<span class="string">http:</span><span class="comment">//schemas.android.com/tools</span></span><br></pre></td></tr></table></figure>
<p><img src="http://ww4.sinaimg.cn/large/53488390gw1ez52s9860dg20e205x78k.gif" alt="image"></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars.githubusercontent.com/u/2337950?v=3"
               alt="David.Yu" />
          <p class="site-author-name" itemprop="name">David.Yu</p>
          <p class="site-description motion-element" itemprop="description">Google Fans、Android Follower</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">1</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">6</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/archmages" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/archmages" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/archmages" target="_blank">
                  
                    <i class="fa fa-globe"></i> Zhihu
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">David.Yu</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"archmage"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  

  
  


</body>
</html>
